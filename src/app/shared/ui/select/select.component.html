<div
  class="select-container"
  [class]="'select--' + variant() + ' select--' + size()"
>
  @if (label()) {
    <label class="select-label" [class.required]="required()">
      {{ label() }}
    </label>
  }

  <div
    class="select-field"
    [class.focused]="focused"
    [class.disabled]="disabled()"
    [class.error]="error()"
    (click)="toggleDropdown()"
    (blur)="onBlur()"
    tabindex="0"
    role="combobox"
    [attr.aria-expanded]="isOpen"
    [attr.aria-haspopup]="true"
  >
    <div class="select-value">
      <span class="select-text" [class.placeholder]="!getSelectedOption()">
        {{ getDisplayValue() }}
      </span>
    </div>

    <div class="select-arrow" [class.open]="isOpen">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
        <path
          d="M7 10l5 5 5-5"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    </div>
  </div>

  @if (isOpen) {
    <div class="select-dropdown" [class.open]="isOpen">
      <div class="dropdown-list">
        @for (option of options(); track option.value) {
          <div
            class="dropdown-option"
            [class.selected]="isOptionSelected(option)"
            [class.disabled]="option.disabled"
            (click)="selectOption(option)"
            role="option"
            [attr.aria-selected]="isOptionSelected(option)"
          >
            <span class="option-text">{{ option.label }}</span>
            @if (isOptionSelected(option)) {
              <div class="option-check">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                  <path
                    d="M20 6L9 17l-5-5"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </div>
            }
          </div>
        }
      </div>
    </div>
  }

  @if (error()) {
    <div class="select-error">
      {{ error() }}
    </div>
  }
</div>
